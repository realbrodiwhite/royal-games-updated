{"ast":null,"code":"import{useContext,useEffect,useRef}from'react';import'./Game.scss';import{useNavigate,useParams}from'react-router-dom';import axios from'axios';import{SocketContext}from'../../context/socket';import*as PIXI from'pixi.js';import Reel from'../../slot/Reel';import SlotGame from'../../slot/SlotGame';import initControls from'../../slot/initControls';import gsap from'gsap';import{jsx as _jsx}from\"react/jsx-runtime\";const Game=props=>{const elRef=useRef(null);const params=useParams();const socket=useContext(SocketContext);const navigate=useNavigate();useEffect(()=>{let game;axios.get(`../gamescripts/${params.gameId}.js`).then(response=>{const script=document.createElement('script');script.text=response.data;document.head.appendChild(script);game=window.initGame(params.gameId,SlotGame,Reel,initControls,socket,PIXI,gsap,()=>{navigate('/');});document.head.removeChild(script);const gameCanvas=elRef.current.querySelector('canvas');if(gameCanvas){gameCanvas.remove();}elRef.current.appendChild(game.renderer.view);}).catch(error=>{console.error('Error loading game script:',error.message,error.stack);});return()=>{if(game){game.destroy();}};},[params.gameId,navigate,socket]);return/*#__PURE__*/_jsx(\"div\",{className:\"Game\",ref:elRef});};export default Game;","map":{"version":3,"names":["useContext","useEffect","useRef","useNavigate","useParams","axios","SocketContext","PIXI","Reel","SlotGame","initControls","gsap","jsx","_jsx","Game","props","elRef","params","socket","navigate","game","get","gameId","then","response","script","document","createElement","text","data","head","appendChild","window","initGame","removeChild","gameCanvas","current","querySelector","remove","renderer","view","catch","error","console","message","stack","destroy","className","ref"],"sources":["/workspaces/royal-games-updated/src/features/game/Game.js"],"sourcesContent":["import { useContext, useEffect, useRef } from 'react';\r\nimport './Game.scss';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { SocketContext } from '../../context/socket';\r\nimport * as PIXI from 'pixi.js';\r\nimport Reel from '../../slot/Reel';\r\nimport SlotGame from '../../slot/SlotGame';\r\nimport initControls from '../../slot/initControls';\r\nimport gsap from 'gsap';\r\n\r\nconst Game = (props) => {\r\n  const elRef = useRef(null);\r\n  const params = useParams();\r\n  const socket = useContext(SocketContext);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    let game;\r\n\r\n    axios.get(`../gamescripts/${params.gameId}.js`).then((response) => {\r\n      const script = document.createElement('script');\r\n      script.text = response.data;\r\n      document.head.appendChild(script);\r\n\r\n      game = window.initGame(params.gameId, SlotGame, Reel, initControls, socket, PIXI, gsap, () => { navigate('/'); });\r\n      document.head.removeChild(script);\r\n\r\n      const gameCanvas = elRef.current.querySelector('canvas');\r\n\r\n      if (gameCanvas) {\r\n        gameCanvas.remove();\r\n      }\r\n\r\n      elRef.current.appendChild(game.renderer.view);\r\n    }).catch((error) => {\r\n      console.error('Error loading game script:', error.message, error.stack);\r\n    });\r\n\r\n    return () => {\r\n      if (game) {\r\n        game.destroy();\r\n      }\r\n    };\r\n  }, [params.gameId, navigate, socket]);\r\n\r\n  return (\r\n    <div\r\n      className=\"Game\"\r\n      ref={elRef}\r\n    >\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Game;"],"mappings":"AAAA,OAASA,UAAU,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CACrD,MAAO,aAAa,CACpB,OAASC,WAAW,CAAEC,SAAS,KAAQ,kBAAkB,CACzD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,aAAa,KAAQ,sBAAsB,CACpD,MAAO,GAAK,CAAAC,IAAI,KAAM,SAAS,CAC/B,MAAO,CAAAC,IAAI,KAAM,iBAAiB,CAClC,MAAO,CAAAC,QAAQ,KAAM,qBAAqB,CAC1C,MAAO,CAAAC,YAAY,KAAM,yBAAyB,CAClD,MAAO,CAAAC,IAAI,KAAM,MAAM,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAExB,KAAM,CAAAC,IAAI,CAAIC,KAAK,EAAK,CACtB,KAAM,CAAAC,KAAK,CAAGd,MAAM,CAAC,IAAI,CAAC,CAC1B,KAAM,CAAAe,MAAM,CAAGb,SAAS,CAAC,CAAC,CAC1B,KAAM,CAAAc,MAAM,CAAGlB,UAAU,CAACM,aAAa,CAAC,CACxC,KAAM,CAAAa,QAAQ,CAAGhB,WAAW,CAAC,CAAC,CAE9BF,SAAS,CAAC,IAAM,CACd,GAAI,CAAAmB,IAAI,CAERf,KAAK,CAACgB,GAAG,CAAC,kBAAkBJ,MAAM,CAACK,MAAM,KAAK,CAAC,CAACC,IAAI,CAAEC,QAAQ,EAAK,CACjE,KAAM,CAAAC,MAAM,CAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC,CAC/CF,MAAM,CAACG,IAAI,CAAGJ,QAAQ,CAACK,IAAI,CAC3BH,QAAQ,CAACI,IAAI,CAACC,WAAW,CAACN,MAAM,CAAC,CAEjCL,IAAI,CAAGY,MAAM,CAACC,QAAQ,CAAChB,MAAM,CAACK,MAAM,CAAEb,QAAQ,CAAED,IAAI,CAAEE,YAAY,CAAEQ,MAAM,CAAEX,IAAI,CAAEI,IAAI,CAAE,IAAM,CAAEQ,QAAQ,CAAC,GAAG,CAAC,CAAE,CAAC,CAAC,CACjHO,QAAQ,CAACI,IAAI,CAACI,WAAW,CAACT,MAAM,CAAC,CAEjC,KAAM,CAAAU,UAAU,CAAGnB,KAAK,CAACoB,OAAO,CAACC,aAAa,CAAC,QAAQ,CAAC,CAExD,GAAIF,UAAU,CAAE,CACdA,UAAU,CAACG,MAAM,CAAC,CAAC,CACrB,CAEAtB,KAAK,CAACoB,OAAO,CAACL,WAAW,CAACX,IAAI,CAACmB,QAAQ,CAACC,IAAI,CAAC,CAC/C,CAAC,CAAC,CAACC,KAAK,CAAEC,KAAK,EAAK,CAClBC,OAAO,CAACD,KAAK,CAAC,4BAA4B,CAAEA,KAAK,CAACE,OAAO,CAAEF,KAAK,CAACG,KAAK,CAAC,CACzE,CAAC,CAAC,CAEF,MAAO,IAAM,CACX,GAAIzB,IAAI,CAAE,CACRA,IAAI,CAAC0B,OAAO,CAAC,CAAC,CAChB,CACF,CAAC,CACH,CAAC,CAAE,CAAC7B,MAAM,CAACK,MAAM,CAAEH,QAAQ,CAAED,MAAM,CAAC,CAAC,CAErC,mBACEL,IAAA,QACEkC,SAAS,CAAC,MAAM,CAChBC,GAAG,CAAEhC,KAAM,CAGR,CAAC,CAEV,CAAC,CAED,cAAe,CAAAF,IAAI","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}